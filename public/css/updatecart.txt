router.post("/want2wear/shoppingcart/update/:id" , function(req,res,next){
    console.log("Here");
    var stockID = req.params.id;
    var cart = new Cart(req.session.cart ? req.session.cart : {items: {}});
    var action = req.query.action;

    console.log(stockID);
    console.log(action);
    console.log("Enasus");
    if(req.xhr){
        console.log("hi");
    }
    else{
        res.redirect('/index');
    }
    
    if(action == "add"){
    Stock.findById(stockID, function(err,available){
        if(err){
            console.log(err);
        }
        else{
            cart.addOne(stockID,available.quantity);
            req.session.cart = cart;
        // console.log(req.session.cart);
        res.redirect('/want2wear/shoppingcart');
        }
    });  
    }
    else if(action == "delete"){

        cart.delete(stockID);
        req.session.cart = cart;
        res.redirect('/want2wear/shoppingcart');

    }

    else if (action == "decrese"){
        cart.decrese(stockID);
        req.session.cart = cart;
        res.redirect('/want2wear/shoppingcart');

    }
    
    
    console.log(req.session.cart)
   

    
});


router.get('/want2wear/shoppingcart/clear' ,middleware.isLoggedIn,  function(req,res){
    delete req.session.cart;
    res.redirect('/want2wear/shoppingcart');

});
