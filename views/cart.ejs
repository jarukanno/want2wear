<%- include("partials/header") %>

    <link rel='stylesheet' type='text/css' href='/css/cart.css' />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Pacifico&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="/js/cart.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <meta charset="utf-8">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">

    <div class="container2">
            <ul class="progressbar">
                <li class="aa"><i class="fa fa-shopping-cart" aria-hidden="true" ></i><br>CART<br></li>
                <li class="active2 aa"><i class="fa fa-credit-card"></i><br>payment<br></li>
                <li class="active2 aa"><i class="fa fa-check"></i><br>order<br>complete</li>
        
            </ul> 
        </div>
        <br>
    <% if (products != null) { %>
        
        <main>
          
            <div class="basket">
             
              <div class="basket-labels">
                <ul>
                  <li class="item item-heading">Item</li>
                  <li class="price">Price</li>
                  <li class="quantity">Quantity</li>
                  <li class="subtotal">Subtotal</li>
                </ul>
              </div>
              <% products.map(function(product){ %>
              <div class="basket-product">
                <div class="item">
                    <% Object.values(product.details.productID).map(function(show){ %>
                       
               
                        <div class="product-image">
                            <img alt="Placholder Image 2" class="product-frame" src= <%= show.image %>>
                        </div> 
                    <% }); %>
                  <div class="product-details">
                    <h1>
                        <strong>
                            <span class="item-quantity"> 
                                <%= product.qty %> x 
                            </span> 
                        <% Object.values(product.details.productID).map(function(show){ %>
                            <a href="/want2wear/<%= show._id %>"><%= show.ProductName %></a>
                        <% }); %>
                        </strong>
                    </h1>
                        <p>
                            <strong>
                                <% Object.values(product.details.colors).map(function(showcolor){ %>
                                    <%= showcolor.colorName %>
                                <% }); %> , 
                                <% Object.values(product.details.size).map(function(showsize){ %>
                                    <%= showsize.sizeName %>
                                <% }); %>
                            </strong>
                        </p>
                   
                  </div>
                </div>
                <div class="price">
                    <% Object.values(product.details.productID).map(function(show){ %>
                        <%= show.price %>
                    <% }); %>
                </div>
                <div class="quantity">
                   
                    <%= product.qty %>  pcs. 
                </div>
                
                <div class="subtotal">
                    <%= product.price %>
                </div>
                <div class="remove">
                  <form id="modifyCart" action="/want2wear/shoppingcart/update/<%= product.details._id %>?_method=PUT" method="POST">
                    <!-- <input type="hidden" value="<%= product.details._id %>"> -->
                          <button type="submit" value="add"  >   +   </button>
                        
                  </form><br>
                  <form id="modifyCart" action="/want2wear/shoppingcart/update/<%= product.details._id %>?_method=DELETE" method="POST">
                    
                          <button type="submit"  value="decrese"  >   -   </button>
                        
                  </form>
                        
                        <br>
                        <form id="modifyCart" action="/want2wear/shoppingcart/delete/<%= product.details._id %>?_method=DELETE" method="POST">
                          
                                <button type="submit"  value="delete"  >  Remove  </button>
                              
                        </form>
                          
                          
                </div>
              </div>
              <br>
              
              
              
              
             <% }); %>   
             <form  action="/want2wear/shoppingcart/clear?_method=DELETE" method="POST">
                          
              <button id="modifyCart" type="submit"  value="delete"  >  Clear  </button>
            
          </form>
             <a href="/want2wear/shoppingcart/clear" >Clear</a>
            </div>
            
            
          
            <form method="POST"  action = "/want2wear/shoppingcart/payment?user=<%= user._id %>">
            <aside>
              <div class="summary">
                <div class="summary-total-items"><span class="total-items" value="<%= totalProduct %>" ><%= totalProduct %></span> Items in your Bag</div>
                <div class="summary-subtotal">
                  <div class="subtotal-title">Subtotal</div>
                  <div class="subtotal-value final-value" id="basket-subtotal" value="<%= totalPrice %>"><%= totalPrice %></div>
                  
                </div>
                <div class="summary-delivery">
                  <select name="shipment" class="summary-delivery-selection" required>
                      <option value="0" selected disabled>Select Delivery Method</option>
                     <option value="register">REG</option>
                     <option value="ems">EMS</option>
                     <option value="pickup">Self pickup</option>
                     
                  </select>
                </div>
                <div class="summary-total">
                  <div class="total-title">Total</div>
                  <div class="total-value final-value" id="basket-total"> <%= totalPrice %></div>
                </div>
                <div class="summary-checkout">
                  <button type="submit" class="checkout-cta">Go to Secure Checkout</button>
                </div>
              </div>
            </aside>
          </form>
          
          </main>
   <% }

   else { %>
    <br>
    <h2>Your cart is empty</h2>


   <% } %>
  
 

<%- include("partials/footer") %>